@using Microsoft.AspNetCore.Components

<MudDialog>
    <TitleContent>
        <MudText Typo="Typo.h6">
            <MudIcon Icon="@Icons.Material.Filled.Preview" Class="mr-3 mb-n1"/>
            @_title
        </MudText>
    </TitleContent>
    <DialogContent>
        <MudForm Model="_model" @ref="@_form" Validation="@(_validator.ValidateValue)">
            <MudGrid>
                <MudItem xs="12" md="6">
                    <MudAutocomplete T="string" @bind-Value="_model.Name"
                                     Required="true"
                                     CoerceText="false"
                                     CoerceValue="true"
                                     For="@(() => _model.Name)"
                                     Immediate="true"
                                     ShowProgressIndicator="true"
                                     SearchFunc="@SearchOccupantAsync"
                                     OnBlur="SetOccupantAsync"
                                     Label="姓名"/>
                </MudItem>
                <MudItem xs="12" md="6">
                    <MudRadioGroup T="string" @bind-SelectedOption="_model.Sex">
                        <MudRadio Option="@("男")">男</MudRadio>
                        <MudRadio Option="@("女")">女</MudRadio>
                    </MudRadioGroup>
                </MudItem>
                <MudItem xs="12" md="6">
                    <MudTextField @bind-Value="_model.IdCard"
                                  Required="true"
                                  For="@(() => _model.IdCard)"
                                  Immediate="true"
                                  Label="身份证号"/>
                </MudItem>
                <MudItem xs="12" md="6">
                    <MudTextField @bind-Value="_model.Area"
                                  For="@(() => _model.Area)"
                                  Immediate="true"
                                  Label="地区"/>
                </MudItem>
                <MudItem xs="12" md="6">
                    <MudTextField @bind-Value="_model.From"
                                  For="@(() => _model.From)"
                                  Immediate="true"
                                  Label="来自"/>
                </MudItem>
                <MudItem xs="12" md="6">
                    <MudTextField @bind-Value="_model.PhoneNumber"
                                  Required="true"
                                  For="@(() => _model.PhoneNumber)"
                                  Immediate="true"
                                  Label="电话"/>
                </MudItem>
                <MudItem xs="12" md="12">
                    <MudTextField @bind-Value="_model.Remark"
                                  For="@(() => _model.Remark)"
                                  Immediate="true"
                                  Lines="3"
                                  Label="备注"/>
                </MudItem>
                <MudItem xs="12" md="6">
                    <MudNumericField @bind-Value="_model.Price"
                                     Required="true"
                                     For="@(() => _model.Price)"
                                     Immediate="true"
                                     Min="0"
                                     Max="9999999"
                                     Label="实际价格"/>
                </MudItem>
                <MudItem xs="12" md="6">
                    <MudNumericField @bind-Value="_model.Deposit"
                                     Required="true"
                                     For="@(() => _model.Deposit)"
                                     Immediate="true"
                                     Min="0"
                                     Max="9999999"
                                     Label="押金"/>
                </MudItem>
                <MudItem xs="12" md="6">
                    <MudNumericField @bind-Value="_model.Count"
                                     Required="true"
                                     For="@(() => _model.Count)"
                                     Immediate="true"
                                     Min="0"
                                     Max="9999999"
                                     Label="入住人数"/>
                </MudItem>
            </MudGrid>
        </MudForm>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Cancel">取消</MudButton>
        <MudButton Color="Color.Primary" OnClick="SaveRegisterInfoAsync" Disabled="_isPost">
            @if (_isPost)
            {
                <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true"/>
            }
            else
            {
                <MudText>@_title</MudText>
            }
        </MudButton>
    </DialogActions>
</MudDialog>